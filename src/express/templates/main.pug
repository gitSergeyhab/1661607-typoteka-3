extends ./layouts/wrapper


mixin createTheme(theme, count, categoryId)
  li.themes__item
    if id == categoryId
      a.themes__item-link.themes__item-link--active
    else
      a.themes__item-link(href= `/articles/category/${categoryId}`)= theme
        sup= count



mixin createPreviewCategory(item)
  li.preview__breadcrumbs-item
    a.preview__breadcrumbs-link(href=`/articles/category/${item.id}`)= item.name



mixin createPreviewArticle(article)
  li.preview__item
    ul.preview__breadcrumbs
      each item of article.categories
        +createPreviewCategory(item)
    .preview__background
      img.preview__background-image(src='img/skyscraper@1x.jpg' width='460' height='240' srcset='img/skyscraper@1x.jpg, img/skyscraper@2x.jpg 2x' alt= article.title)
    time.preview__time(datetime='2019-03-21T20:33')= article.createdDate
    h3.preview__name
      a.preview__name-link(href= `/articles/${article.id}`)= article.title
    p.preview__text= article.announce
    a.preview__comment(href= `/articles/${article.id}#comment-anchor`)
      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
      span.preview__cloud
      |
      b.preview__comment-count= article.comments.length


mixin createPage(page, active)
  if active
    li.pagination__item.pagination__item--active
      a.button--disabled(href='#')= page
  else
    li.pagination__item
      a(href=`?page=${page}`)= page


mixin createArrowPage(backwards, page, totalPage)
  li
    if backwards
      if page == 1
        a.pagination__button.button.button--backwards.button--disabled(href='#' aria-label='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–∑–∞–¥') –ù–∞–∑–∞–¥
      else
        a.pagination__button.button.button--backwards(href=`?page=${page - 1}` aria-label='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–∑–∞–¥') –ù–∞–∑–∞–¥
    else
      if page == totalPage
        a.pagination__button.button.button--forward.button--disabled(href='#' aria-label='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–ø–µ—Ä–µ–¥') –í–ø–µ—Ä–µ–¥
      else
        a.pagination__button.button.button--forward(href=`?page=${page + 1}` aria-label='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–ø–µ—Ä–µ–¥') –í–ø–µ—Ä–µ–¥





block headerContent
  include ./headers/header


block mainContent
  main.main-page

      h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
      p.

        –≠—Ç–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –±–ª–æ–≥–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, —á—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å —Å–µ–±—è üëè

      section.main-page__theme-list
        h2.visually-hidden –°–ø–∏—Å–æ–∫ —Ç–µ–º
        ul.themes

          each category of categories
            +createTheme(category.name, category.count, category.id)


      if (isMain)
        include blocks/main-top

      if(!articles || !articles.length)
        include blocks/empty

      section.main-page__list.preview
        h2.visually-hidden –°–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π

        ul.preview__list

          if (articles)
            each article of articles
              +createPreviewArticle(article)

      if (totalPage && page)
        .preview__toggle-wrapper
          ul.preview__pagination.pagination
            +createArrowPage(1, page, totalPage)

            each item of pages
              +createPage(item, item == page)

            +createArrowPage(0, page, totalPage)



